{% load humanize %}
{% for product in products %}
<div class="bg-white p-4 rounded-xl shadow-sm border border-brand-200 flex flex-col justify-between">
    <div>

        <h3 class="font-bold text-lg text-brand-500 leading-tight">{{ product.name }}</h3>
        <p class="text-sm text-gray-500">{{ product.barcode }}</p>
    </div>
    <div class="mt-4 flex justify-between items-end">
        <div>
            <span class="text-xs text-gray-400">Precio</span>
            <p class="text-xl font-bold text-brand-400">${{ product.price|intcomma }}</p>
        </div>
        <div class="text-right">
            <span class="text-xs text-gray-400">Stock</span>
            <p class="{% if product.stock < 5 %}text-red-500{% else %}text-brand-500{% endif %} font-bold">
                {{ product.stock }}
            </p>
        </div>
    </div>

    <div class="mt-4 pt-3 border-t border-gray-100 flex justify-between items-center">
        <a href="{% url 'edit_product' product.id %}"
            class="text-xs font-bold text-gray-400 hover:text-brand-500 flex items-center gap-1 px-2 py-1 rounded hover:bg-gray-50 transition-colors">
            <span>✏️</span> Editar
        </a>

        <form action="{% url 'add_stock' product.id %}" method="post" class="flex items-center gap-1">
            {% csrf_token %}
            <input type="number" name="quantity" placeholder="+ Stock"
                class="w-20 text-xs border border-gray-200 rounded focus:ring-brand-500 focus:border-brand-500 px-2 py-1 transition-all"
                min="1" required>
            <button type="submit"
                class="bg-green-50 text-green-600 hover:bg-green-100 text-xs px-2 py-1 rounded font-bold border border-green-200 transition-colors">
                +
            </button>
        </form>
    </div>
</div>
{% empty %}
<div class="col-span-full text-center py-10 text-gray-400">
    No hay productos encontrados.
</div>
{% endfor %}